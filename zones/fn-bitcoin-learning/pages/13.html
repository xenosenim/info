<!doctype html>
<html>
<head>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=1.0'>
  <title>Bitcoin Learning</title>
  <link rel='stylesheet' type='text/css' media='screen' href='/styles/commons.css'>
  <link rel='stylesheet' type='text/css' href='../styles/style.css'>
  <script type='text/javascript' src='/scripts/commons.js'></script>
</head>
<body>
<div id='idPanel'>
<div id='idTopbar'>
  <div id='idTopbarNavigation'>
    <a href='/'><span class='clNavHome'><span></a>
    <a href='../../index.html'><span class='clNavIndex'><span></a>
    <a href='./12.html'><span class='clNavLeft'><span></a>
    <a href='../index.html'><span class='clNavUp'><span></a>
    <a href='./14.html'><span class='clNavRight'><span></a>
  </div>
</div>

<div id='idContent'>

<h1>13.Outputs</h1>
<p class="subheading">The new batches of bitcoins created in transactions.</p>

<p class="note important">
The bitcoin transaction system involves sending and receiving whole batches of bitcoins, called <span class="term">outputs</span>.
</p>
<p>Fair enough. But to be honest the only way to really understand how this works is to look at a few example transactions.</p>
<h2>Transaction 1 - A simple transaction.</h2>
<p>Let’s begin this story of transactions with the birth of a fresh batch of bitcoins…</p>
<p>You are mining bitcoins on your own. By some miracle, you have managed to mine a block of transactions and earn yourself a fresh batch of 25 bitcoins.</p>

<a target='_blank' href='../images/13.00-generation-transaction.png'><img class='clImageThumb' src='../images/13.00-generation-transaction.png'></a><br><br>
<p class='clFigcaption'>Every miner also includes their own address at the top of each block, so if they manage to mine the block, the <span class="term">block reward</span> can be sent to their address. This is known as the <span class="term">generation transaction</span>.</p>


<p>So this is the current state of your bitcoin address:</p>
<p><a target='_blank' href='../images/13.01-transaction1-before.png'><img class='clImageThumb' src='../images/13.01-transaction1-before.png'></a><br><br></p>
<p>Naturally, your first instinct is to celebrate. So let’s use 1 of these bitcoins to buy some beer.</p>

<a target='_blank' href='../images/13.01-beer.png'><img class='clImageThumb' src='../images/13.01-beer.png'></a><br><br>
<p class='clFigcaption'>Beer.</p>


<p>Now, your other first instinct would be to take 1 of these bitcoins
(from the batch of 25) to pay for this beer. This would make sense, but
it’s not how transactions work.</p>

<a target='_blank' href='../images/13.01-transaction1-chip.png'><img class='clImageThumb' src='../images/13.01-transaction1-chip.png'></a><br><br>
<p class='clFigcaption'>Not quite.</p>


<p>Instead, we have to <strong>send the entire batch of 25 bitcoins</strong> in the transaction.</p>
<p>But to make sure we <em>don’t spend all 25 bitcoins</em> in a “1 bitcoin” payment, we <strong>split the batch up</strong> and send it to <em>two destinations</em>:</p>
<ol type="1">
<li>The beer shop. (the payment)</li>
<li>Back to our own address. (our change)</li>
</ol>

<a target='_blank' href='../images/13.01-transaction1.png'><img class='clImageThumb' src='../images/13.01-transaction1.png'></a><br><br>
<p class='clFigcaption'>The newly created batches are called <span class="term">outputs<span>.</span></span></p>


<p>It’s a bit of an around-the-houses way of doing it, but it achieves the same end-result.</p>
<p class="note text">
The reason why transactions work this way is because it’s an easier and
more secure way of doing it from a programming perspective.
</p>
<p>Anyway, this is what the bitcoin addresses look like <em>after</em> the transaction:</p>

<a target='_blank' href='../images/13.01-transaction1-after.png'><img class='clImageThumb' src='../images/13.01-transaction1-after.png'></a><br><br>
<p class='clFigcaption'>The
beer shop has a new batch of 1, and we’ve sent ourselves a new batch of
24. That original batch of 25 bitcoins has now been “used up”.</p>


<p>So it’s just like we took 1 bitcoin from our address and sent it to another address… but now we know what <em>really</em> happened.</p>
<aside class="summary">
<p>This is what the bitcoin transaction system is designed to do:</p>
<ol type="1">
<li>Take an existing output (a batch of bitcoins)</li>
<li>Create newly-sized outputs (batches) from it</li>
<li>Send those outputs to different addresses</li>
</ol>
</aside>
<h2>Transaction 2 - Using outputs as inputs.</h2>
<p>Okay, from now on we’re going to use the word “<span class="term">output</span>” instead of “batch”.</p>
<p>Anyway, a few days have passed since the beer shop sold us that beer.
 And judging by the current state of their bitcoin address, the beer
business is booming:</p>
<p><a target='_blank' href='../images/13.02-transaction2-before.png'><img class='clImageThumb' src='../images/13.02-transaction2-before.png'></a><br><br></p>
<p>But as we all know, beer doesn’t grow on trees. So the beer shop is on the lookout for a brand new beer machine.</p>

<a target='_blank' href='../images/13.02-beer-machine.png'><img class='clImageThumb' src='../images/13.02-beer-machine.png'></a><br><br>
<p class='clFigcaption'>This is what my friends call me on nights out.</p>


<p>Oh look, a lovely beer machine for the low low price of 4.2 bitcoins.</p>
<p>Let’s buy it…</p>

<a target='_blank' href='../images/13.02-transaction2.png'><img class='clImageThumb' src='../images/13.02-transaction2.png'></a><br><br>
<p class='clFigcaption'>Constructing the transaction for the beer machine.</p>


<p>Alright, I realise I’ve just cranked the diagram up a few notches on this one, but it’s not hard to explain:</p>
<ol type="1">
<li><p>The beer shop doesn’t have a single output (batch) at their address to cover the cost of the beer machine (<strong>4.2</strong>). So instead, we <em>gather a handful of outputs together</em> to get a total greater than 4.2.</p></li>
<li><p>When we construct a transaction, the outputs we are gathering up to be spent are referred to as the transaction “<span class="term">inputs</span>”.</p></li>
</ol>
<p class="note text">
When you’re <em>using an <span class="term">output</span></em> in a transaction, it’s temporarily called an “<span class="term">input</span>”.
</p>
<ol type="1" start="3">
<li>Using the total input of <strong>4.5</strong>, the beer shop creates two new outputs of <strong>4.2</strong> and <strong>0.3</strong>.</li>
</ol>
<p>And here’s the state of the beer shop’s bitcoin address after the transaction:</p>
<p><a target='_blank' href='../images/13.02-transaction2-after.png'><img class='clImageThumb' src='../images/13.02-transaction2-after.png'></a><br><br></p>
<p>Once again, the <em>outputs</em> that were used as <em>inputs</em> have been “<strong>spent</strong>”, and can’t be used again.</p>
<p>The “<strong>unspent</strong>” outputs however are still good for spending, so we call these the <em>unspent transaction outputs</em> (<span class="term">UTXO</span>s).</p>
<p class="note important">
The total number of bitcoins at an address is the sum of the address’s UTXOs.
</p>
<aside class="aside">
<p>We chose the outputs of <code>[1] + [0.5] + [2] + [1]</code> as the inputs for the transaction. But <em>as long as the total is greater than the amount we want to send</em>, we can use any combination of <span class="term">outputs</span> (well, <em><span class="term">inputs</span></em>) we want.</p>
<pre><code>[1] + [3] + [0.5]             = 4.5
[3] + [2]                     = 5
[1] + [3] + [0.5] + [2] + [1] = 7.5</code></pre>
All of these are fine. You can figure out the change for each one yourself.
</aside>
<h2>Transaction 3 - Transaction fees.</h2>
<p>Ah yes, we’ve not included a transaction fee in either of the last two transactions. Oops-a-diddly.</p>
<p>Without a transaction fee, those two transactions will probably take a
 while to get included in to a block. This is because a transaction fee
gives your transaction <span class="term">priority</span>.</p>
<p class="note text">
The transaction fees are picked up by miners when they mine a block, so
adding a transaction fee basically acts as an incentive for miners to
include your transaction in a block.
</p>
<p>Anyhow, pretend we didn’t send that last transaction in to the network, and let’s <em>add a transaction fee to it</em>.</p>
<p><a target='_blank' href='../images/13.03-transaction2-fee.png'><img class='clImageThumb' src='../images/13.03-transaction2-fee.png'></a><br><br></p>
<p>Okay, so where the hell is the output for the transaction fee? Well, there isn’t one. But <strong>look at the size of the outputs</strong>.</p>
<p class="note important">
The total of the outputs is less than the total of the inputs, which
means that there are some remaining bitcoins that aren’t being used up.
This “left over” amount is the transaction fee.
</p>
<p>And that’s all transaction fees are - the remainder of a transaction.</p>
<p class="note text">
The amount that’s left over in a transaction (inputs - outputs) always
gets picked up by a miner. So if you manually constructed a transaction
and forgot to create a change output for yourself, the miner would pick
up the amount you left behind, no matter how much it is.
</p>

</div>
</div>
</body>
</html>
